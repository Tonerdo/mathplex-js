function Complex(e,o){this.real=0,this.imaginary=0,this.real="undefined"==typeof e?this.real:parseFloat(e),this.imaginary="undefined"==typeof o?this.imaginary:parseFloat(o),this.magnitude=Math.sqrt(this.real*this.real+this.imaginary*this.imaginary),this.tangent=Math.atan2(this.imaginary,this.real),this.tangent=Math.PI-(3*Math.PI-(Math.PI-(3*Math.PI-this.tangent)%(2*Math.PI)))%(2*Math.PI)}Complex.ZERO=new Complex(0,0),Complex.ONE=new Complex(1,0),Complex.I=new Complex(0,1),Complex.NEG_I=new Complex(0,-1),Complex.PI=new Complex(Math.PI,0),Complex.E=new Complex(Math.E,0);var parseComplex=function(e){if(e instanceof Complex)return e;if("string"!=typeof e)return void 0;for(var o=e,t=["0","1","2","3","4","5","6","7","8","9","+","-","."],r=0;r<e.length;r++)-1==t.indexOf(e[r])&&(o=o.replace(e[r],""));var n=1,a=1,p=0;n="-"==o[0]?-1:n,p="-"==o[0]||"+"==o[0]?1:p;for(var m="",l=p;l<o.length&&(p=l,"+"!=o[l]&&"-"!=o[l]);l++)m+=o[l];n*=Number(m),a="-"==o[p]?-1:a,++p;for(var i="",x=p;x<o.length&&("+"!=o[x]&&"-"!=o[x]);x++)i+=o[x];return a*=Number(i),new Complex(n,a)};Complex.transform=function(e){var o;return o=e instanceof Complex?e:o,o="number"==typeof e?new Complex(e,0):e,o="string"==typeof e?parseComplex(e):o},Complex.add=function(e,o){var t,r;t=Complex.transform(e),r=Complex.transform(o);var n=t.real+r.real,a=t.imaginary+r.imaginary;return new Complex(n,a)},Complex.subtract=function(e,o){var t,r;t=Complex.transform(e),r=Complex.transform(o);var n=t.real-r.real,a=t.imaginary-r.imaginary;return new Complex(n,a)},Complex.multiply=function(e,o){var t,r;t=Complex.transform(e),r=Complex.transform(o);var n=t.real*r.real-t.imaginary*r.imaginary,a=t.real*r.imaginary+t.imaginary*r.real;return new Complex(n,a)},Complex.divide=function(e,o){var t,r,n,a,p;return t=Complex.transform(e),r=Complex.transform(o),p=new Complex(r.real,r.imaginary),p.imaginary=-1*p.imaginary,n=Complex.multiply(t,p),a=Complex.multiply(r,p),new Complex(n.real/a.real,n.imaginary/a.real)},Complex.negate=function(e){var o;return o=Complex.transform(e),new Complex(-o.real,-o.imaginary)},Complex.abs=function(e){var o;return o=Complex.transform(e),o.magnitude},Complex.floor=function(e){var o;o=Complex.transform(e);var t=Math.floor(o.real),r=Math.floor(o.imaginary);return new Complex(t,r)},Complex.ceil=function(e){var o;o=Complex.transform(e);var t=Math.ceil(o.real),r=Math.ceil(o.imaginary);return new Complex(t,r)},Complex.round=function(e){var o;o=Complex.transform(e);var t=Math.round(o.real),r=Math.round(o.imaginary);return new Complex(t,r)},Complex.square=function(e){var o;o=Complex.transform(e);var t=o.real*o.real-o.imaginary*o.imaginary,r=2*o.real*o.imaginary;return new Complex(t,r)},Complex.polar=function(e,o){return new Complex(e*Math.cos(o),e*Math.sin(o))},Complex.pow=function(e,o){var t;return t=Complex.transform(e),Complex.polar(Math.pow(t.magnitude,o),t.tangent*o)},Complex.sqrt=function(e){var o;return o=Complex.transform(e),o.pow(.5)},Complex.log=function(e){var o;return o=Complex.transform(e),new Complex(Math.log(o.magnitude),o.tangent)},Complex.exp=function(e){var o;return o=Complex.transform(e),0===o.imaginary?Complex.E.pow(o.real):Complex.polar(Math.exp(o.real),o.imaginary)},Complex.tan=function(e){var o;o=Complex.transform(e);var t=o.multiply(Complex.I),r=Complex.exp(t),n=Complex.exp(Complex.negate(t));return r.subtract(n).divide(r.add(n).multiply(Complex.I))},Complex.sin=function(e){var o;o=Complex.transform(e);var t=o.multiply(Complex.I);return Complex.exp(t).subtract(Complex.exp(Complex.negate(t))).divide(new Complex(0,2))},Complex.cos=function(e){var o;o=Complex.transform(e);var t=o.multiply(Complex.I);return Complex.exp(t).add(Complex.exp(Complex.negate(t))).divide(new Complex(2,0))},Complex.atan=function(e){var o;return o=Complex.transform(e),Complex.I.multiply(Complex.log(Complex.I.add(o).divide(Complex.I.subtract(o)))).divide(new Complex(2,0))},Complex.asin=function(e){var o;return o=Complex.transform(e),Complex.NEG_I.multiply(Complex.log(o.multiply(Complex.I).add(Complex.sqrt(Complex.ONE.subtract(o.pow(2))))))},Complex.acos=function(e){var o;return o=Complex.transform(e),Complex.I.multiply(Complex.log(o.add(Complex.NEG_I.multiply(Complex.sqrt(Complex.ONE.subtract(o.pow(2)))))))},Complex.random=function(){return new Complex(Math.random(),Math.random())},Complex.min=function(){for(var e=[],o=[],t=0;t<arguments.length;t++)o.push(arguments[t]),e.push(arguments[t].magnitude);var r=Math.min.apply(Math,e);return o[e.indexOf(r)]},Complex.max=function(){for(var e=[],o=[],t=0;t<arguments.length;t++)o.push(arguments[t]),e.push(arguments[t].magnitude);var r=Math.max.apply(Math,e);return o[e.indexOf(r)]},Complex.prototype.add=function(e){return Complex.add(this,e)},Complex.prototype.subtract=function(e){return Complex.subtract(this,e)},Complex.prototype.multiply=function(e){return Complex.multiply(this,e)},Complex.prototype.divide=function(e){return Complex.divide(this,e)},Complex.prototype.negate=function(){return Complex.negate(this)},Complex.prototype.abs=function(){return Complex.abs(this)},Complex.prototype.floor=function(){return Complex.floor(this)},Complex.prototype.ceil=function(){return Complex.ceil(this)},Complex.prototype.round=function(){return Complex.round(this)},Complex.prototype.square=function(){return Complex.square(this)},Complex.prototype.pow=function(e){return Complex.pow(this,e)},Complex.prototype.sqrt=function(){return Complex.sqrt(this)},Complex.prototype.log=function(){return Complex.log(this)},Complex.prototype.exp=function(){return Complex.exp(this)},Complex.prototype.tan=function(){return Complex.tan(this)},Complex.prototype.sin=function(){return Complex.sin(this)},Complex.prototype.cos=function(){return Complex.cos(this)},Complex.prototype.atan=function(){return Complex.atan(this)},Complex.prototype.asin=function(){return Complex.asin(this)},Complex.prototype.acos=function(){return Complex.acos(this)},Complex.prototype.toString=function(){var e=this.real%1==0?this.real.toString():this.real.toFixed(4).toString(),o=this.imaginary%1==0?this.imaginary.toString():this.imaginary.toFixed(4).toString();return(this.imaginary>0||0==this.imaginary)&&(o="+"+o),e+o},"undefined"!=typeof module&&null!==module&&module.exports?module.exports=Complex:Math.Complex=Complex;
